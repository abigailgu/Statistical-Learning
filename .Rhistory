scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="country names", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat, text = ~name, locations = ~Country,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>')))
fig
View(flights)
View(dep_delay)
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="country names", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat, text = ~name,locations = ~ faa
showlegend = FALSE)
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="country names", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat, text = ~name,locations = ~ faa,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>')))
fig
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat, text = ~name,locations = ~ faa,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>')))
fig
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat, text = ~name,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>')))
fig
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(type = "scattergeo", locations = ~faa,mode = "text")
fig
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(type = "scattergeo", locations = ~faa, mode = "text", showlegend = FALSE)
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(type = "scattergeo", locations = ~faa, mode = "text", showlegend = FALSE)
fig
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat, locations = ~faa
showlegend = FALSE)
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat, locations = ~faa,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(type = "scattergeo", locations = ~faa, mode = "text", showlegend = FALSE)
fig
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(type = "scattergeo", locations = ~faa, mode = "text", showlegend = FALSE)
fig
data <- fromJSON(file="https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json")
library(rjson)
install.packages("rjson")
library(rjson)
data <- fromJSON(file="https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json")
url <- 'https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json'
counties <- rjson::fromJSON(file=url)
View(counties)
View(airports)
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(data = dep_delay_loc ,type = "scattergeo", locations = ~faa, mode = "text", showlegend = FALSE)
fig
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(data = dep_delay_loc ,type = "scattergeo", locations = faa, mode = "text", showlegend = FALSE)
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(data = dep_delay_loc ,type = "scattergeo", locations = ~faa,text = COUNTRY, mode = "text", showlegend = FALSE)
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(data = dep_delay_loc ,type = "scattergeo",text = ~faa, mode = "text", showlegend = FALSE)
fig
View(airports)
dep_delay_loc <- dep_delay %>% left_join(airports, by = "faa") %>% drop_na()
# removed : STT,SJU, BQN need to be explain why they can be found.
dep_delay_loc <- dep_delay_loc %>% mutate(per_ch = NA)
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.10 ] <- "<= 10%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.15 & dep_delay_loc$per > 0.10 ] <- "10% - 15%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.20 & dep_delay_loc$per > 0.15 ] <- "15% - 20%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.25 & dep_delay_loc$per > 0.20 ] <- "20% - 25%"
dep_delay_loc$per_ch[dep_delay_loc$per >= 0.25] <- "25% <="
df <- read.csv("https://raw.githubusercontent.com/plotly/datasets/master/2014_world_gdp_with_codes.csv")
View(df)
?left_join
?colnames
dep_delay_loc <- dep_delay %>% left_join(airports, by = "faa") %>% drop_na()
# removed : STT,SJU, BQN need to be explain why they can be found.
dep_delay_loc <- dep_delay_loc %>% mutate(per_ch = NA)
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.10 ] <- "<= 10%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.15 & dep_delay_loc$per > 0.10 ] <- "10% - 15%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.20 & dep_delay_loc$per > 0.15 ] <- "15% - 20%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.25 & dep_delay_loc$per > 0.20 ] <- "20% - 25%"
dep_delay_loc$per_ch[dep_delay_loc$per >= 0.25] <- "25% <="
df <- read.csv("https://raw.githubusercontent.com/plotly/datasets/master/2014_world_gdp_with_codes.csv")
colnames(df$CODE) <- faa
dep_delay_loc <- dep_delay %>% left_join(airports, by = "faa") %>% drop_na()
# removed : STT,SJU, BQN need to be explain why they can be found.
dep_delay_loc <- dep_delay_loc %>% mutate(per_ch = NA)
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.10 ] <- "<= 10%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.15 & dep_delay_loc$per > 0.10 ] <- "10% - 15%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.20 & dep_delay_loc$per > 0.15 ] <- "15% - 20%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.25 & dep_delay_loc$per > 0.20 ] <- "20% - 25%"
dep_delay_loc$per_ch[dep_delay_loc$per >= 0.25] <- "25% <="
df <- read.csv("https://raw.githubusercontent.com/plotly/datasets/master/2014_world_gdp_with_codes.csv")
colnames(df$CODE) <- "faa"
dep_delay_loc <- dep_delay %>% left_join(airports, by = "faa") %>% drop_na()
# removed : STT,SJU, BQN need to be explain why they can be found.
dep_delay_loc <- dep_delay_loc %>% mutate(per_ch = NA)
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.10 ] <- "<= 10%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.15 & dep_delay_loc$per > 0.10 ] <- "10% - 15%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.20 & dep_delay_loc$per > 0.15 ] <- "15% - 20%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.25 & dep_delay_loc$per > 0.20 ] <- "20% - 25%"
dep_delay_loc$per_ch[dep_delay_loc$per >= 0.25] <- "25% <="
df <- read.csv("https://raw.githubusercontent.com/plotly/datasets/master/2014_world_gdp_with_codes.csv")
colnames(df) <- c("COUNTRY","gdp", "faa")
dep_delay_loc <- dep_delay_loc %>% left_join(df, by = faa )
dep_delay_loc <- dep_delay %>% left_join(airports, by = "faa") %>% drop_na()
# removed : STT,SJU, BQN need to be explain why they can be found.
dep_delay_loc <- dep_delay_loc %>% mutate(per_ch = NA)
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.10 ] <- "<= 10%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.15 & dep_delay_loc$per > 0.10 ] <- "10% - 15%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.20 & dep_delay_loc$per > 0.15 ] <- "15% - 20%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.25 & dep_delay_loc$per > 0.20 ] <- "20% - 25%"
dep_delay_loc$per_ch[dep_delay_loc$per >= 0.25] <- "25% <="
df <- read.csv("https://raw.githubusercontent.com/plotly/datasets/master/2014_world_gdp_with_codes.csv")
colnames(df) <- c("COUNTRY","gdp", "faa")
dep_delay_loc <- dep_delay_loc %>% left_join(df, by = "faa" )
dep_delay_loc <- dep_delay %>% left_join(airports, by = "faa") %>% drop_na()
# removed : STT,SJU, BQN need to be explain why they can be found.
dep_delay_loc <- dep_delay_loc %>% mutate(per_ch = NA)
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.10 ] <- "<= 10%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.15 & dep_delay_loc$per > 0.10 ] <- "10% - 15%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.20 & dep_delay_loc$per > 0.15 ] <- "15% - 20%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.25 & dep_delay_loc$per > 0.20 ] <- "20% - 25%"
dep_delay_loc$per_ch[dep_delay_loc$per >= 0.25] <- "25% <="
df <- read.csv("https://raw.githubusercontent.com/plotly/datasets/master/2014_world_gdp_with_codes.csv")
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(data = df ,type = "scattergeo", locations = COUNTRY ,text = CODE, mode = "text", showlegend = FALSE)
dep_delay_loc <- dep_delay %>% left_join(airports, by = "faa") %>% drop_na()
# removed : STT,SJU, BQN need to be explain why they can be found.
dep_delay_loc <- dep_delay_loc %>% mutate(per_ch = NA)
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.10 ] <- "<= 10%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.15 & dep_delay_loc$per > 0.10 ] <- "10% - 15%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.20 & dep_delay_loc$per > 0.15 ] <- "15% - 20%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.25 & dep_delay_loc$per > 0.20 ] <- "20% - 25%"
dep_delay_loc$per_ch[dep_delay_loc$per >= 0.25] <- "25% <="
df <- read.csv("https://raw.githubusercontent.com/plotly/datasets/master/2011_us_ag_exports.csv")
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(data = df ,type = "scattergeo", locations = state ,text = code , mode = "text", showlegend = FALSE)
?state
View(dep_delay_loc)
View(flights)
View(airports)
state.abb
?datasets
library(help = "datasets").
library(help = "datasets")
View(df)
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(data = df ,type = "scattergeo", locations = ~state ,text = ~code , mode = "text", showlegend = FALSE)
fig
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_text(data = df ,type = "scattergeo", locations = ~state ,text = ~code , mode = "text", showlegend = FALSE)
dep_delay_loc <- dep_delay %>% left_join(airports, by = "faa") %>% drop_na()
# removed : STT,SJU, BQN need to be explain why they can be found.
dep_delay_loc <- dep_delay_loc %>% mutate(per_ch = NA)
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.10 ] <- "<= 10%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.15 & dep_delay_loc$per > 0.10 ] <- "10% - 15%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.20 & dep_delay_loc$per > 0.15 ] <- "15% - 20%"
dep_delay_loc$per_ch[dep_delay_loc$per <= 0.25 & dep_delay_loc$per > 0.20 ] <- "20% - 25%"
dep_delay_loc$per_ch[dep_delay_loc$per >= 0.25] <- "25% <="
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="USA-states", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(data = df ,type = "scattergeo", locations = ~state ,text = ~code , mode = "text", showlegend = FALSE)
fig
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="ISO-3", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(data = df ,type = "scattergeo", locations = ~state ,text = ~ code , mode = "text", showlegend = FALSE)
fig
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="ISO-3", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
#add_trace(data = df ,type = "scattergeo", locations = ~state ,text = ~ code , mode = "text", showlegend = FALSE)
fig
geo <- list(
scope = "usa",
projection = list(type = "albers usa"),
landcolor = toRGB("gray95"), showlegend = FALSE,
countrycolor = toRGB("gray80"))
fig <- plot_geo(locationmode ="ISO-3", color = ~per_ch)
fig <- fig %>% add_markers(
data = dep_delay_loc, x = ~lon, y = ~lat,
showlegend = FALSE)
fig <- fig %>% add_segments(
data = dep_delay_loc,
x =-74.16867, xend = ~lon,
y = 40.6925, yend = ~lat,  size = I(1),text = ~name, hoverinfo = "text" )
fig <- fig %>% layout(
title = list(text= '<b>% of Flight Departures Delayed > 15 Min</b><br>Airport = EWR    Year = 2013'),
geo = geo, height=500)
fig <- fig %>% layout(legend = list(x = 0.1, y = -0.4))  %>%
layout(legend=list(title=list(text='<b> Percent range </b>'))) %>%
add_trace(data = dep_delay_loc ,type = "scattergeo",text = ~ faa , mode = "text", showlegend = FALSE)
fig
